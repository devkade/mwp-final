# Test Documentation

헬스장 운동기구 사용 감지 이미지 블로그 시스템의 테스트 문서입니다.

## 문서 구조

```
test/
├── README.md                    # 이 파일
├── test-design-epic-1.md        # Epic 1 테스트 설계
├── test-design-epic-2.md        # Epic 2 테스트 설계
├── test-design-epic-3.md        # Epic 3 테스트 설계
├── user-flow-epic-1.md          # Epic 1 사용자 흐름도
├── user-flow-epic-2.md          # Epic 2 사용자 흐름도
└── user-flow-epic-3.md          # Epic 3 사용자 흐름도
```

## Epic 요약

| Epic | 이름 | 테스트 수 | 예상 시간 | 고위험 항목 |
|------|------|----------|----------|-------------|
| Epic 1 | Equipment Discovery & System Access | 31 | 36h (~5d) | 2 (SEC) |
| Epic 2 | Usage Event Monitoring & Detection | 48 | 59h (~8d) | 4 (SEC, DATA, PERF) |
| Epic 3 | Usage Analytics & Statistics | 26 | 30h (~4d) | 1 (PERF) |
| **Total** | - | **105** | **125h (~17d)** | **7** |

## Risk Summary

### High-Priority Risks (Score ≥6)

| Risk ID | Epic | Category | Description |
|---------|------|----------|-------------|
| R-001 | 1 | SEC | 보안키 brute-force 공격 |
| R-002 | 1 | SEC | 토큰 로컬 저장 평문 노출 |
| R-201 | 2 | SEC | Edge 토큰 하드코딩 노출 |
| R-202 | 2 | DATA | Event 업로드 실패 시 데이터 손실 |
| R-203 | 2 | PERF | 대량 이벤트 조회 시 API 지연 |
| R-204 | 2 | DATA | Change Detection 오탐지 |
| R-301 | 3 | PERF | 대량 이벤트 집계 시 API 지연 |

## Test Priority Matrix

### P0 (Critical) - Run on every commit
- 총 36개 테스트
- 인증, Change Detection, Event API 핵심 경로

### P1 (High) - Run on PR to main
- 총 37개 테스트
- Android UI, 필터링, 호환성 테스트

### P2/P3 (Medium/Low) - Run nightly/on-demand
- 총 32개 테스트
- Component, Unit, 성능 테스트

## Test Execution Commands

### Backend (Django)
```bash
cd PhotoBlogServer
source venv/bin/activate
python manage.py test blog
```

### Android
```bash
cd PhotoViewer
./gradlew test                    # Unit tests
./gradlew connectedAndroidTest    # Instrumented tests
```

### Edge (YOLOv5)
```bash
cd yolov5
source venv/bin/activate
pytest tests/
```

## Quick Reference

### API Endpoints Tested

| Endpoint | Epic | Tests |
|----------|------|-------|
| `POST /api/auth/login/` | 1 | 4 |
| `GET /api_root/machines/` | 1 | 4 |
| `POST /api/machines/{id}/events/` | 2 | 6 |
| `GET /api/machines/{id}/events/` | 2 | 5 |
| `GET /api_root/events/{id}/` | 2 | 3 |
| `GET /api_root/machines/{id}/stats/` | 3 | 8 |

### Android Screens Tested

| Screen | Epic | Tests |
|--------|------|-------|
| LoginActivity | 1 | 5 |
| MachineListActivity | 1 | 5 |
| EventListActivity | 2 | 9 |
| EventDetailActivity | 2 | 4 |
| StatsActivity | 3 | 10 |

### Edge Components Tested

| Component | Epic | Tests |
|-----------|------|-------|
| ChangeDetection (start) | 2 | 3 |
| ChangeDetection (end) | 2 | 2 |
| Event Upload | 2 | 2 |
| Image Resize | 2 | 2 |

## Related Documents

- PRD: `docs/final/gym-service-overview.md`
- Epics: `_bmad-output/epics.md`
- Backend Spec: `docs/final/implementation/02-backend.md`
- Edge Spec: `docs/final/implementation/03-edge-system.md`
- Android Spec: `docs/final/implementation/04-android.md`
- API Reference: `docs/final/implementation/05-api-reference.md`

---

**Generated by**: BMad TEA Agent - Test Architect Module
**Version**: 4.0 (BMad v6)
**Date**: 2025-12-19
